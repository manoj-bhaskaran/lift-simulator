<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>LiftSystem.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Lift Simulator</a> &gt; <a href="index.source.html" class="el_package">com.liftsimulator.admin.entity</a> &gt; <span class="el_source">LiftSystem.java</span></div><h1>LiftSystem.java</h1><pre class="source lang-java linenums">package com.liftsimulator.admin.entity;

import edu.umd.cs.findbugs.annotations.SuppressFBWarnings;
import jakarta.persistence.CascadeType;
import jakarta.persistence.Column;
import jakarta.persistence.Entity;
import jakarta.persistence.GeneratedValue;
import jakarta.persistence.GenerationType;
import jakarta.persistence.Id;
import jakarta.persistence.OneToMany;
import jakarta.persistence.PrePersist;
import jakarta.persistence.PreUpdate;
import jakarta.persistence.Table;

import java.time.OffsetDateTime;
import java.util.ArrayList;
import java.util.List;
import java.util.Objects;

/**
 * JPA entity representing the lift_system table.
 * Root configuration records for lift systems.
 */
@Entity
@Table(name = &quot;lift_system&quot;, schema = &quot;lift_simulator&quot;)
public class LiftSystem {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Column(name = &quot;system_key&quot;, nullable = false, unique = true, length = 120)
    private String systemKey;

    @Column(name = &quot;display_name&quot;, nullable = false, length = 200)
    private String displayName;

    @Column(name = &quot;description&quot;, columnDefinition = &quot;TEXT&quot;)
    private String description;

    @Column(name = &quot;created_at&quot;, nullable = false, updatable = false)
    private OffsetDateTime createdAt;

    @Column(name = &quot;updated_at&quot;, nullable = false)
    private OffsetDateTime updatedAt;

<span class="fc" id="L47">    @OneToMany(mappedBy = &quot;liftSystem&quot;, cascade = CascadeType.ALL, orphanRemoval = true)</span>
    private List&lt;LiftSystemVersion&gt; versions = new ArrayList&lt;&gt;();

<span class="fc" id="L50">    public LiftSystem() {</span>
<span class="fc" id="L51">    }</span>

<span class="fc" id="L53">    public LiftSystem(String systemKey, String displayName, String description) {</span>
<span class="fc" id="L54">        this.systemKey = systemKey;</span>
<span class="fc" id="L55">        this.displayName = displayName;</span>
<span class="fc" id="L56">        this.description = description;</span>
<span class="fc" id="L57">    }</span>

    @PrePersist
    protected void onCreate() {
<span class="fc" id="L61">        OffsetDateTime now = OffsetDateTime.now();</span>
<span class="fc" id="L62">        createdAt = now;</span>
<span class="fc" id="L63">        updatedAt = now;</span>
<span class="fc" id="L64">    }</span>

    @PreUpdate
    protected void onUpdate() {
<span class="nc" id="L68">        updatedAt = OffsetDateTime.now();</span>
<span class="nc" id="L69">    }</span>

    public void addVersion(LiftSystemVersion version) {
<span class="nc" id="L72">        versions.add(version);</span>
<span class="nc" id="L73">        version.setLiftSystem(this);</span>
<span class="nc" id="L74">    }</span>

    public void removeVersion(LiftSystemVersion version) {
<span class="nc" id="L77">        versions.remove(version);</span>
<span class="nc" id="L78">        version.setLiftSystem(null);</span>
<span class="nc" id="L79">    }</span>

    public Long getId() {
<span class="nc" id="L82">        return id;</span>
    }

    public void setId(Long id) {
<span class="nc" id="L86">        this.id = id;</span>
<span class="nc" id="L87">    }</span>

    public String getSystemKey() {
<span class="nc" id="L90">        return systemKey;</span>
    }

    public void setSystemKey(String systemKey) {
<span class="nc" id="L94">        this.systemKey = systemKey;</span>
<span class="nc" id="L95">    }</span>

    public String getDisplayName() {
<span class="nc" id="L98">        return displayName;</span>
    }

    public void setDisplayName(String displayName) {
<span class="nc" id="L102">        this.displayName = displayName;</span>
<span class="nc" id="L103">    }</span>

    public String getDescription() {
<span class="nc" id="L106">        return description;</span>
    }

    public void setDescription(String description) {
<span class="nc" id="L110">        this.description = description;</span>
<span class="nc" id="L111">    }</span>

    public OffsetDateTime getCreatedAt() {
<span class="nc" id="L114">        return createdAt;</span>
    }

    public void setCreatedAt(OffsetDateTime createdAt) {
<span class="nc" id="L118">        this.createdAt = createdAt;</span>
<span class="nc" id="L119">    }</span>

    public OffsetDateTime getUpdatedAt() {
<span class="nc" id="L122">        return updatedAt;</span>
    }

    public void setUpdatedAt(OffsetDateTime updatedAt) {
<span class="nc" id="L126">        this.updatedAt = updatedAt;</span>
<span class="nc" id="L127">    }</span>

    @SuppressFBWarnings(
            value = &quot;EI_EXPOSE_REP&quot;,
            justification = &quot;JPA entity getters must return mutable collections for change tracking. &quot;
                    + &quot;Use addVersion/removeVersion methods for safe modification.&quot;
    )
    public List&lt;LiftSystemVersion&gt; getVersions() {
<span class="nc" id="L135">        return versions;</span>
    }

    @SuppressFBWarnings(
            value = &quot;EI_EXPOSE_REP2&quot;,
            justification = &quot;JPA entity setters require direct field assignment for Hibernate proxies &quot;
                    + &quot;and lazy loading to work correctly.&quot;
    )
    public void setVersions(List&lt;LiftSystemVersion&gt; versions) {
<span class="nc" id="L144">        this.versions = versions;</span>
<span class="nc" id="L145">    }</span>

    @Override
    public boolean equals(Object o) {
<span class="nc bnc" id="L149" title="All 2 branches missed.">        if (this == o) {</span>
<span class="nc" id="L150">            return true;</span>
        }
<span class="nc bnc" id="L152" title="All 4 branches missed.">        if (o == null || getClass() != o.getClass()) {</span>
<span class="nc" id="L153">            return false;</span>
        }
<span class="nc" id="L155">        LiftSystem that = (LiftSystem) o;</span>
<span class="nc" id="L156">        return Objects.equals(systemKey, that.systemKey);</span>
    }

    @Override
    public int hashCode() {
<span class="nc" id="L161">        return Objects.hash(systemKey);</span>
    }

    @Override
    public String toString() {
<span class="nc" id="L166">        return &quot;LiftSystem{&quot;</span>
                + &quot;id=&quot; + id
                + &quot;, systemKey='&quot; + systemKey + '\''
                + &quot;, displayName='&quot; + displayName + '\''
                + &quot;, description='&quot; + description + '\''
                + &quot;, createdAt=&quot; + createdAt
                + &quot;, updatedAt=&quot; + updatedAt
                + '}';
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>